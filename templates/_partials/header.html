<!-- ===============  HEADER COMPONENT  =============== -->
<!-- Wstaw NA POCZĄTKU <body> (żeby był widoczny natychmiast) -->
<!-- ================== HEADER (Kras-Trans) ================== -->
<link rel="preload" href="/assets/media/logo-firma-transportowa-kras-trans.png" as="image" imagesizes="(max-width: 600px) 160px, 200px">
<link rel="stylesheet" href="/assets/css/header.css">

<header id="site-header" class="kt-header" data-theme="auto">
  <div class="kt-topbar">
    <a class="kt-brand" id="brandLink" href="/pl/">
      <img id="brandLogo"
           src="/assets/media/logo-firma-transportowa-kras-trans.png"
           alt="Kras‑Trans" width="200" height="40" decoding="async" fetchpriority="high">
    </a>

    <nav class="kt-nav" aria-label="Główna nawigacja">
      <ul id="ktMainNav" class="kt-nav-list">
        <!-- JS zbuduje -->
      </ul>
    </nav>

    <div class="kt-actions">
      <!-- Language -->
      <div class="kt-lang" id="langSwitch" aria-label="Język" role="listbox">
        <button class="kt-lang-btn" id="langBtn" aria-haspopup="listbox" aria-expanded="false">
          <img class="flag" id="langFlag" src="/assets/flags/pl.svg" alt="">
          <span id="langCode">PL</span>
          <svg class="chev" viewBox="0 0 16 16" aria-hidden="true"><path d="M4 6l4 4 4-4" fill="none" stroke="currentColor" stroke-width="2"/></svg>
        </button>
        <ul class="kt-lang-menu" id="langMenu" hidden>
          <!-- JS zbuduje -->
        </ul>
      </div>

      <!-- Theme -->
      <button class="kt-theme" id="themeToggle" aria-label="Zmień tryb" title="Zmień tryb">
        <svg id="iconSun" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4V2m0 20v-2m8-8h2M2 12h2m13.657-6.343l1.414-1.414M4.929 19.071l1.414-1.414m0-12.728L4.93 4.93M19.07 19.07l-1.414-1.414" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="12" r="4" fill="currentColor"/></svg>
        <svg id="iconMoon" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="currentColor"/></svg>
      </button>

      <!-- CTA -->
      <a class="kt-cta" id="quoteBtn" href="/pl/wycena/">Wycena</a>
    </div>

    <!-- burger na mobile -->
    <button class="kt-burger" id="burger" aria-label="Menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>

  <!-- MEGA MENU (pełna szerokość widoku) -->
  <div id="ktMega" class="kt-mega" aria-hidden="true">
    <div class="kt-mega-inner" id="ktMegaInner">
      <!-- JS wypełni grid -->
    </div>
  </div>
</header>

<script type="module" src="/assets/js/header.js"
        data-api="https://script.google.com/macros/s/AKfycbyQcsU1wSCV6NGDQm8VIAGpZkL1rArZe1UZ5tutTkjJiKZtr4MjQZcDFzte26VtRJJ2KQ/exec?key=kb6mWQJQ3hTtY0m1GQ7v2rX1pC5n9d8zA4s6L2u"></script>
<!-- ======================================================== -->
<header id="kt-header"
        class="kt-header"
        data-cms-url="https://script.google.com/macros/s/AKfycbyQcsU1wSCV6NGDQm8VIAGpZkL1rArZe1UZ5tutTkjJiKZtr4MjQZcDFzte26VtRJJ2KQ/exec?key=kb6mWQJQ3hTtY0m1GQ7v2rX1pC5n9d8zA4s6L2u"
        data-default-lang="pl"
        data-logo-src="/assets/media/logo-firma-transportowa-kras-trans.png">

  <!-- Anti-FOUC (motyw) – mikroskrypt przed stylami: -->
  <script>
    (function(){
      try{
        var p = localStorage.getItem('kt-theme');
        if(!p){ p = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light'; }
        document.documentElement.setAttribute('data-theme', p);
      }catch(e){}
    })();
  </script>

  <!-- CRITICAL MINIMAL STYLES (tylko layout paska – właściwe style w header.css) -->
  <link rel="preload" as="style" href="/assets/css/header.css" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/css/header.css"></noscript>

  <!-- Pasek (glass, sticky) -->
  <div class="kt-bar">
    <a class="kt-brand" href="/" aria-label="Home">
      <img class="kt-logo" alt="Kras-Trans" width="168" height="28"
           src="/assets/media/logo-firma-transportowa-kras-trans.png"
           loading="eager" decoding="async">
    </a>

    <nav class="kt-nav" aria-label="Main">
      <ul class="kt-nav-list" id="kt-nav-list">
        <!-- Skeleton (zastępowany po fetchu CMS) -->
        <li class="kt-skel"></li>
        <li class="kt-skel"></li>
        <li class="kt-skel"></li>
        <li class="kt-skel"></li>
        <li class="kt-skel"></li>
      </ul>
    </nav>

    <div class="kt-actions">
      <!-- Języki -->
      <div class="kt-lang" id="kt-lang">
        <button class="kt-lang-btn" id="kt-lang-btn" aria-haspopup="listbox" aria-expanded="false" aria-label="Wybierz język">
          <img class="kt-flag" alt="" src="/assets/flags/pl.svg" width="18" height="18">
          <span class="kt-lang-code">PL</span>
          <svg class="kt-caret" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10l5 5 5-5"/></svg>
        </button>
        <ul class="kt-lang-list" id="kt-lang-list" role="listbox" aria-label="Języki" hidden></ul>
      </div>

      <!-- Motyw -->
      <button class="kt-theme" id="kt-theme" aria-label="Przełącz motyw">
        <svg class="sun" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4V2m0 20v-2m8-8h2M2 12H4m13.66 6.66l1.41 1.41M4.93 4.93l1.41 1.41m0 11.32l-1.41 1.41M19.07 4.93l-1.41 1.41M12 7a5 5 0 100 10 5 5 0 000-10z"/></svg>
        <svg class="moon" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
      </button>

      <!-- CTA (etykieta i href z CMS/Strings/Nav) -->
      <a class="kt-cta" id="kt-cta" href="#">
        <span id="kt-cta-label">…</span>
      </a>

      <!-- Burger (mobile) -->
      <button class="kt-burger" id="kt-burger" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>

  <!-- Mega menu (zwarty dock) -->
  <div class="kt-mega" id="kt-mega" role="region" aria-live="polite" hidden>
    <div class="kt-mega-inner" id="kt-mega-inner"><!-- kolumny z JS --></div>
  </div>

  <!-- Drawer mobile -->
  <aside class="kt-mobile" id="kt-mobile" hidden aria-hidden="true">
    <div class="kt-mobile-head">
      <span>Menu</span>
      <button class="kt-mobile-close" id="kt-mobile-close" aria-label="Zamknij">✕</button>
    </div>
    <nav class="kt-mobile-nav" id="kt-mobile-nav" aria-label="Mobile"></nav>
  </aside>

  <!-- Logika -->
  <script defer src="/assets/js/header.js"></script>
</header>
<!-- =============  /HEADER COMPONENT  ============= -->
