<header id="site-header" class="site-header sq" data-api="/nav/global" aria-busy="true">
  <div class="wrap bar">
    <!-- BRAND -->
    <a class="brand" data-bind="href: routes.home|slug" aria-label="">
      <img class="brand__logo" width="140" height="36"
           data-bind="attr:{src: nav.logo.src, alt: nav.logo.alt}" alt="">
    </a>

    <!-- PRIMARY NAV (CMS wstrzykuje <li>…; dzieci z podmenu powinny mieć data-panel="id") -->
    <nav id="primaryNav" class="nav sq-nav" role="navigation" aria-label="">
      <ul class="nav__list" data-bind="html: nav.primary_html"></ul>
    </nav>

    <!-- AKCJE: języki + CTA + hamburger -->
    <div class="actions">
      <div class="langs" data-api="/nav/langs" data-bind="html: nav.langs_html"></div>
      <a class="btn btn-primary" data-bind="href: nav.cta.slugKey|slug, text: nav.cta.label"></a>
      <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-controls="mobileMenu" aria-label=""></button>
    </div>
  </div>

  <!-- MEGA PANEL (Squarespace-like). CMS wstrzykuje sekcje z id/data-panel zgodnymi z data-panel w li -->
  <div id="mega" class="mega" data-state="closed" aria-hidden="true">
    <div class="mega__wrap wrap">
      <div class="mega__panels" data-bind="html: nav.mega_html"></div>
    </div>
  </div>

  <!-- MOBILE DRAWER: jeśli CMS nie da mobile_html, używamy primary_html -->
  <div id="mobileMenu" class="mobile-menu" hidden>
    <div class="mobile-menu__inner">
      <nav class="mobile-nav" aria-label="">
        <ul class="mobile-nav__list" data-bind="html: (nav.mobile_html || nav.primary_html)"></ul>
      </nav>
      <div class="mobile-langs" data-api="/nav/langs" data-bind="html: nav.langs_html"></div>
      <a class="btn btn-primary mobile-cta" data-bind="href: nav.cta.slugKey|slug, text: nav.cta.label"></a>
    </div>
  </div>
</header>
