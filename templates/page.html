{% extends "base.html" %}
{# =====================================================================
   KRAS-TRANS ‚Ä¢ PAGE (HOME+GENERIC) ‚Äì CMS-FIRST MAX
   ‚Ä¢ Bez header/footer w tym pliku (sƒÖ w base.html) ‚Äì tu tylko <main> content
   ‚Ä¢ Wszystkie tre≈õci docelowo z Arkuszy (Apps Script) przez REST ‚Üí JSON
   ‚Ä¢ Haczyki: elementy z atrybutem data-api, kt√≥re wype≈Çnia cms.js
   ‚Ä¢ Ten plik NIE usuwa Twoich makr ‚Äì dodaje tylko kolejne sekcje i haki
   ‚Ä¢ Kontrakt danych (co ma zwracaƒá API) opisany przy ka≈ºdej sekcji
   ===================================================================== #}

{# --------------------------- USTAWIENIA LOCALE --------------------------- #}
{% set lang = (page.lang or site.defaultLang or 'pl') %}

{# --------------------------- MAKRAs: i18n + URL -------------------------- #}
{% macro t(key, fb='') -%}
  {# Fallback ‚Äì dop√≥ki nie przepniesz wszystkiego na CMS strings #}
  {%- if i18n and (key in i18n) -%}
    {{ i18n[key] }}
  {%- else -%}
    {{ fb }}
  {%- endif -%}
{%- endmacro %}

{% macro url_by_slugkey(slugKey) -%}
  {%- if slugKey=='home' -%}
    /{{ lang }}/
  {%- else -%}
    /{{ lang }}/{{ slugKey }}/
  {%- endif -%}
{%- endmacro %}

{% macro page_url(p) -%}
  {{- p.canonical_path if p.canonical_path else ('/' ~ lang ~ '/' ~ (p.slug ~ '/' if p.slug else '')) -}}
{%- endmacro %}

{% block content %}

{# =====================================================================
   0) HERO (LCP)
   API: /home/hero  ‚Üí  {
     "title": {pl,en,...}, "lead": {pl,en,...},
     "kpi": [{"value":"24/7","label":{pl,en,...}}, ... up to 4],
     "cta_primary": {"label":{pl,en}, "slugKey":"quote"},
     "cta_secondary": {"label":{pl,en}, "slugKey":"contact"},
     "image": {"src":"/assets/media/hero.webp","srcset":"...","alt":{pl,en}}
   }
   ===================================================================== #}
<section id="hero" class="section hero" aria-labelledby="hero-title" data-api="/home/hero">
  <div class="wrap hero__wrap">
    <div class="hero__copy">
      <p class="hero__kicker" data-bind="lead:claim">{{ t('claim','Transport i spedycja') }}</p>
      <h1 id="hero-title" class="hero__title" data-bind="text:title">{{ page.h1 or page.title }}</h1>
      <p class="hero__lead" data-bind="text:lead">{{ page.lead }}</p>
      <div class="cta-row">
        <a class="btn btn-primary" data-bind="href:cta_primary.slugKey|slug, text:cta_primary.label">{{ t('cta_quote','Wycena transportu') }}</a>
        <a class="btn" data-bind="href:cta_secondary.slugKey|slug, text:cta_secondary.label">{{ t('cta_contact','Kontakt') }}</a>
      </div>
      <ul class="hero__kpi" role="list">
        {# 4 miejsca na KPI ‚Äì JS nadpisze textContent #}
        <li><strong data-bind="kpi[0].value">24/7</strong><span data-bind="kpi[0].label">{{ t('kpi_1','Monitorowanie') }}</span></li>
        <li><strong data-bind="kpi[1].value">EURO6</strong><span data-bind="kpi[1].label">{{ t('kpi_2','Flota') }}</span></li>
        <li><strong data-bind="kpi[2].value">99,2%</strong><span data-bind="kpi[2].label">{{ t('kpi_3','Terminowo≈õƒá') }}</span></li>
        <li><strong data-bind="kpi[3].value">+500</strong><span data-bind="kpi[3].label">{{ t('kpi_4','Klienci') }}</span></li>
      </ul>
    </div>
    <div class="hero__media">
      <picture>
        <source data-bind="attr: { imagesrcset: image.srcset }" type="image/avif" />
        <img id="heroLCP"
             src="{{ page.hero_image or '/assets/media/hero.webp' }}"
             width="1280" height="720"
             alt="{{ page.hero_alt or page.h1 }}"
             data-bind="attr: { src: image.src, alt: image.alt }"
             decoding="async" />
      </picture>
    </div>
  </div>
  <div class="hero__divider" aria-hidden="true"></div>
</section>

{# =====================================================================
   1) US≈ÅUGI (kafle)
   API: /home/services  ‚Üí  { "services": [
       { "icon":"üöö"|"/img.svg", "title":{pl,en}, "desc":{pl,en}, "slugKey":"service‚Äëslug" }, ... ] }
   ===================================================================== #}
<section id="services" class="section services" aria-labelledby="services-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="services-title">{{ t('services_h2','Us≈Çugi') }}</h2>
      <p class="section__sub">{{ t('services_sub','Transport krajowy i miƒôdzynarodowy, ekspres, palety i wiƒôcej.') }}</p>
    </header>

    <div class="grid services__grid" data-api="/home/services" aria-live="polite">
      {# JS wstawi <article class="card"> na podstawie tablicy services #}
    </div>

    <div class="section__cta">
      <a class="btn" href="{{ url_by_slugkey('services') }}">{{ t('services_more','Wszystkie us≈Çugi') }}</a>
    </div>
  </div>
</section>

{# =====================================================================
   2) BRAN≈ªE (kafle tematyczne)
   API: /home/industries  ‚Üí  { "items": [ {"title":{pl,en}, "desc":{pl,en}} ... ] }
   ===================================================================== #}
<section id="industries" class="section industries" aria-labelledby="ind-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="ind-title">{{ t('ind_h2','Bran≈ºe i zastosowania') }}</h2>
      <p class="section__sub">{{ t('ind_sub','Obs≈Çugujemy e‚Äëcommerce, FTL, przeprowadzki i inne.') }}</p>
    </header>
    <div class="grid industries__grid" data-api="/home/industries">
      {# JS wype≈Çni .card z title/desc #}
    </div>
  </div>
</section>

{# =====================================================================
   3) ZASIƒòG / KORYTARZE
   API: /home/coverage ‚Üí { "corridors": [ {"title":{pl,en}, "desc":{pl,en}} ... ] }
   ===================================================================== #}
<section id="coverage" class="section coverage" aria-labelledby="cov-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="cov-title">{{ t('cov_h2','Zasiƒôg w UE') }}</h2>
      <p class="section__sub">{{ t('cov_sub','G≈Ç√≥wne korytarze i regiony obs≈Çugi.') }}</p>
    </header>
    <div class="grid coverage__grid" data-api="/home/coverage"></div>
  </div>
</section>

{# =====================================================================
   4) PROCES (kroki)
   API: /home/process ‚Üí { "steps": [ {"title":{pl,en}, "desc":{pl,en}} ‚Ä¶ ] }
   ===================================================================== #}
<section id="process" class="section process" aria-labelledby="proc-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="proc-title">{{ t('proc_h2','Jak dzia≈Çamy') }}</h2>
      <p class="section__sub">{{ t('proc_sub','Prosty proces od zapytania do dostawy.') }}</p>
    </header>
    <ol class="steps" data-api="/home/process"></ol>
  </div>
</section>

{# =====================================================================
   5) KPI / TRUST (liczby / dowody)
   API: /home/trust ‚Üí { "items": [ {"value":"99%","label":{pl,en}, "desc":{pl,en}} ‚Ä¶ ] }
   ===================================================================== #}
<section id="trust" class="section trust" aria-labelledby="trust-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="trust-title">{{ t('trust_h2','Dowody jako≈õci') }}</h2>
      <p class="section__sub">{{ t('trust_sub','Liczby, certyfikaty, zadowoleni klienci.') }}</p>
    </header>
    <div class="grid trust__grid" data-api="/home/trust"></div>
  </div>
</section>

{# =====================================================================
   6) OPINIE / TESTIMONIALS
   API: /home/testimonials ‚Üí { "items": [ {"quote":{pl,en}, "author":"‚Ä¶", "role":"‚Ä¶"} ] }
   ===================================================================== #}
<section id="testimonials" class="section testimonials" aria-labelledby="testi-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="testi-title">{{ t('testi_h2','M√≥wiƒÖ o nas') }}</h2>
      <p class="section__sub">{{ t('testi_sub','Rekomendacje klient√≥w i partner√≥w.') }}</p>
    </header>
    <div class="reel testimonials__reel" data-api="/home/testimonials"></div>
  </div>
</section>

{# =====================================================================
   7) PARTNERZY / LOGA
   API: /home/partners ‚Üí { "logos": [ {"src":"/logo.svg","alt":"‚Ä¶"} ] }
   ===================================================================== #}
<section id="partners" class="section partners" aria-label="Partnerzy">
  <div class="wrap">
    <ul class="logos" role="list" data-api="/home/partners"></ul>
  </div>
</section>

{# =====================================================================
   8) FLOTA / SPRZƒòT
   API: /home/fleet ‚Üí { "items": [ {"title":{pl,en}, "desc":{pl,en}} ] }
   ===================================================================== #}
<section id="fleet" class="section fleet" aria-labelledby="fleet-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="fleet-title">{{ t('fleet_h2','Flota i mo≈ºliwo≈õci') }}</h2>
      <p class="section__sub">{{ t('fleet_sub','EURO6, naczepy standard/mega, monitoring 24/7') }}</p>
    </header>
    <div class="grid fleet__grid" data-api="/home/fleet"></div>
  </div>
</section>

{# =====================================================================
   9) CENNIK / WYCENA (CTA z CMS)
   API: /home/pricing ‚Üí { "tiles": [ {"title":{pl,en}, "desc":{pl,en}, "slugKey":"pricing"|"quote"} ] }
   ===================================================================== #}
<section id="pricing" class="section pricing" aria-labelledby="pricing-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="pricing-title">{{ t('pricing_h2','Cennik i wycena') }}</h2>
      <p class="section__sub">{{ t('pricing_sub','Prosta wycena i dopasowane stawki') }}</p>
    </header>
    <div class="grid pricing__grid" data-api="/home/pricing"></div>
  </div>
</section>

{# =====================================================================
   10) BLOG / AKTUALNO≈öCI (z CMS ‚Äì opcjonalnie)
   API: /blog/latest ‚Üí { "items": [ {"title":{pl,en}, "lead":{pl,en}, "path":"/pl/blog/.../"} ] }
   ===================================================================== #}
<section id="insights" class="section insights" aria-labelledby="ins-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="ins-title">{{ t('ins_h2','Poradniki i aktualno≈õci') }}</h2>
      <p class="section__sub">{{ t('ins_sub','Nowo≈õci i case studies') }}</p>
    </header>
    <div class="reel insights__reel" data-api="/blog/latest"></div>
  </div>
</section>

{# =====================================================================
   11) FAQ (akordeon z CMS)
   API: /faq/list ‚Üí [ {"q":{pl,en}, "a":{pl,en}} ]
   ===================================================================== #}
<section id="faq" class="section faq" aria-labelledby="faq-title">
  <div class="wrap">
    <header class="section__head">
      <h2 id="faq-title">{{ t('faq_h2','FAQ ‚Äì pytania i odpowiedzi') }}</h2>
      <p class="section__sub">{{ t('faq_sub','Najczƒôstsze pytania klient√≥w') }}</p>
    </header>
    <div class="faq-list" data-api="/faq/list"></div>
  </div>
</section>

{# =====================================================================
   12) KO≈ÉCOWE CTA (z CMS, ale ma te≈º bezpieczne fallbacki)
   API: /home/final ‚Üí { "title":{pl,en}, "desc":{pl,en}, "cta_primary":{label,slugKey}, "cta_secondary":{label,slugKey} }
   ===================================================================== #}
<section id="final-cta" class="section final-cta" aria-labelledby="final-title" data-api="/home/final">
  <div class="wrap final-cta__wrap">
    <div class="final-cta__copy">
      <h2 id="final-title" data-bind="text:title">{{ t('final_h2','Zacznijmy wsp√≥≈Çpracƒô') }}</h2>
      <p data-bind="text:desc">{{ t('final_sub','Wycena w 15 minut, kontakt 24/7') }}</p>
      <div class="cta-row">
        <a class="btn btn-primary" data-bind="href:cta_primary.slugKey|slug, text:cta_primary.label">{{ t('final_cta_primary','Wycena transportu') }}</a>
        <a class="btn" data-bind="href:cta_secondary.slugKey|slug, text:cta_secondary.label">{{ t('final_cta_secondary','Kontakt') }}</a>
      </div>
    </div>
  </div>
</section>

{# =====================================================================
   13) GENERIC BODY (dla innych podstron ‚Äì je≈õli to nie HOME)
   ===================================================================== #}
{% if not (page.slug=='' or page.slugKey=='home' or page.type=='home') %}
<section class="section content" id="content">
  <div class="wrap">
    {{ page.body_html | safe }}
  </div>
</section>
{% endif %}

{% endblock %}
