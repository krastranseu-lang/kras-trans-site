<!doctype html>
<html lang="{{ page.lang if page else 'pl' }}" class="no-motion">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ head.title }}</title>
  <meta name="description" content="{{ head.description }}">
  <link rel="canonical" href="{{ head.canonical }}">
  <meta property="og:title" content="{{ head.og_title }}">
  <meta property="og:description" content="{{ head.og_description }}">
  <meta property="og:image" content="{{ head.og_image }}">
  <meta property="og:type" content="website">
  <link rel="stylesheet" href="/assets/css/kras-global.css">
  <link rel="stylesheet" href="/assets/css/kras-ui.css">
  {% for ld in head.jsonld %}
  <script type="application/ld+json">{{ ld|tojson }}</script>
  {% endfor %}
  <script>
    // zakładamy: window.CMS_PAGE = { slugKey:'…', lang:'pl' }
    (function(){
      const data = window.CMS_DATA || {};
      const { slugKey } = window.CMS_PAGE || {};
      const map = (data.hreflang||{})[slugKey]; if(!map) return;

      Object.entries(map).forEach(([L, href]) => {
        const link = document.createElement('link');
        link.rel = 'alternate';
        link.hreflang = (L==='ua') ? 'uk' : L; // ukr: 'uk'
        link.href = href;
        document.head.appendChild(link);
      });

      const x = document.createElement('link');
      x.rel = 'alternate';
      x.hreflang = 'x-default';
      x.href = map.en || map.pl; // fallback
      document.head.appendChild(x);
    })();
  </script>
</head>
<body>
  <header class="site-header">
    <div class="container header-grid">
      <a class="brand" href="/">
        <img src="/assets/media/logo-firma-transportowa-kras-trans.png" alt="{{ (company[0].name if company else 'Kras-Trans') }}" width="132" height="32" loading="eager" fetchpriority="high">
      </a>
      <nav id="site-nav" class="nav" hidden aria-label="{{ strings.nav_main or 'Główna nawigacja' }}"></nav>
      <div class="header-actions">
        <button id="theme-toggle" class="icon-btn theme-toggle" aria-label="{{ strings.theme_toggle or 'Zmień motyw' }}">
          <span class="sun"></span><span class="moon"></span><span class="paper"></span>
        </button>
        <a class="btn primary btn--shine" href="#kontakt">{{ strings.cta_call or 'Wyceń' }}</a>
      </div>
    </div>
    <div id="mega-root" class="mega" hidden></div>
  </header>
  <main>{% block content %}{% endblock %}</main>
  <footer class="site-footer" id="kontakt">
    <p>© {{ (company[0].name if company else 'Kras-Trans') }} — Ekspresowy transport 24/7</p>
  </footer>
  <script>window.KRAS_NAV = {{ nav_cfg|tojson }};</script>
  <script src="/assets/js/kras-global.js" defer></script>
  <script src="/assets/js/menu-builder.js" defer></script>
  <script src="/assets/js/kras-ui.js" defer></script>
</body>
</html>
