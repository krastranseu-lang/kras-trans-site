@layer base, components, utilities;

@layer base {
  :root {
    color-scheme: light dark;
    --accent-hue:22;
    --bg:#ffffff;
    --ink:#1f1f1f;
    --muted:#6b7280;
    --card:#ffffff;
  }
  :root[data-theme="dark"]{
    --bg:#0b0f17;
    --ink:#e9edf5;
    --muted:#8a94a7;
    --card:#12151d;
  }
  :root[data-theme="ebook"]{
    --bg:#F7F3E8;
    --ink:#1C1A16;
    --muted:#6B665E;
    --card:#FBF8EF;
  }
  @font-face{
    font-family:"Inter";
    font-style:normal;
    font-weight:100 900;
    font-display:swap;
    size-adjust:100%;
    src:url("/assets/fonts/InterVariable.woff2") format("woff2-variations");
    unicode-range:U+000-5FF;
  }
  html.no-motion *,
  html.no-motion *::before,
  html.no-motion *::after{
    animation:none!important;
    transition:none!important;
  }
  @media (prefers-reduced-motion:reduce){
    html.no-motion{ }
  }
  .sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
}

@layer components {
  .site-header{
    position:sticky;top:0;z-index:40;
    backdrop-filter:saturate(1.2) blur(8px);
    background:color-mix(in srgb,var(--bg) 70%, transparent);
    border-bottom:1px solid color-mix(in srgb,var(--ink) 15%, transparent);
    overflow:clip;
  }
  .site-header :is(a,button){outline-offset:2px;}
  #mega-root{position:absolute;left:0;right:0;top:100%;background:var(--card);box-shadow:0 10px 40px rgba(0,0,0,.14);}

  .hero-wrap{display:grid;gap:clamp(24px,5vw,40px);}
  @media(min-width:800px){.hero-wrap{grid-template-columns:1fr 1fr;align-items:center;}}
  .hero-media{width:100%;height:auto;opacity:0;transition:opacity .6s ease;}
  .hero.is-ready .hero-media{opacity:1;}

  .cards{display:grid;gap:clamp(16px,3vw,32px);}
  .cards--wrap{grid-auto-flow:column;}
  .cards--scroll{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;}
  .cards--scroll .card{flex:0 0 clamp(260px,80vw,340px);scroll-snap-align:start;}
  .card{background:var(--card);border-radius:var(--r,16px);box-shadow:var(--shadow-1,0 4px 18px rgba(0,0,0,.08));transition:transform .3s;}
  .card>.pad{padding:clamp(16px,3vw,24px);}
  .card.glass{background:color-mix(in srgb,var(--card) 60%,transparent);backdrop-filter:blur(8px);}
  .card.edge{border:1px solid color-mix(in srgb,var(--ink) 20%,transparent);}
  .card.soft3d{box-shadow:0 6px 12px rgba(0,0,0,.12),0 1px 0 rgba(255,255,255,.05) inset;}
  .card.illume{box-shadow:0 0 0 1px color-mix(in srgb,var(--ink) 10%,transparent),0 0 8px hsl(var(--accent-hue) 80% 60% / .35);}
  .tilt-cards{perspective:1000px;}
  .tilt-cards .card{transform-style:preserve-3d;}
  .tilt-cards .card:is(:hover,:focus-within){transform:translateY(-4px) rotateX(1.5deg) rotateY(-1.5deg);}

  /* Split Hero (napis -> rail w tym samym miejscu) */
  .split-hero{ position:relative; height:140vh; }
  .split-hero__sticky{ position:sticky; top:calc(54px + 1svh); display:grid; place-items:center; padding-block:clamp(18px,4vh,32px); min-height:clamp(340px,58vh,680px); z-index:1; }
  .split-hero__stack{ --stack-h:clamp(140px,14vw,220px); position:relative; width:min(var(--offer-maxw,860px),92vw); height:var(--stack-h); margin-inline:auto; container-type:inline-size; }
  .split-hero--narrow .split-hero__stack{ --offer-maxw:860px }
  .split-hero--wide .split-hero__stack{ --offer-maxw:1100px }
  .split-hero__stack > *{ position:absolute; inset:0 }
  .split-hero__title{ opacity:calc(1 - var(--p,0)); transition:opacity .2s linear }
  .title-half{ display:grid; place-items:center; line-height:1; text-transform:uppercase; font-weight:900; font-size:clamp(36px,16cqw,96px); letter-spacing:.04em; color:var(--ink); text-shadow:0 1px 0 color-mix(in oklab, var(--ink) 10%, transparent); will-change:transform,opacity }
  .title-left { clip-path: inset(0 50% 0 0); transform: translateX(calc(-50cqw * var(--p, 0))); }
  .title-right{ clip-path: inset(0 0 0 50%); transform: translateX(calc( 50cqw * var(--p, 0))); }
  .split-hero__rail{ display:grid; grid-auto-flow: column; grid-auto-columns: clamp(220px, 42cqw, 360px); gap:16px; overflow-x:auto; padding:6px; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; align-items:stretch; height:100%; opacity: var(--p, 0); transform: translateY(calc(14px * (1 - var(--p, 0)))); transition: opacity .2s linear, transform .2s ease; pointer-events:none; }
  .split-hero__rail > *{ scroll-snap-align:start }
  .offer-card{ position:relative; height:100%; border-radius:18px; overflow:hidden; isolation:isolate; background:var(--card); border:1px solid color-mix(in srgb,var(--ink) 20%, transparent); box-shadow:var(--shadow-1,0 4px 18px rgba(0,0,0,.08)); }
  .offer-card img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; transform:scale(1.02); transition:transform .35s ease }
  .offer-card::after{ content:""; position:absolute; inset:0; background:linear-gradient(180deg,transparent,rgba(0,0,0,.35) 68%,rgba(0,0,0,.55)); mix-blend-mode:multiply; pointer-events:none }
  .offer-card__title,.offer-card__desc{ position:absolute; left:16px; right:16px; color:#fff; z-index:1; text-shadow:0 1px 2px rgba(0,0,0,.4) }
  .offer-card__title{ bottom:42px; font-weight:800; font-size:clamp(15px,7cqw,20px) }
  .offer-card__desc { bottom:14px; font-size:clamp(12px,5cqw,14px); opacity:.95 }
  @media (hover:hover){ .offer-card:hover img{ transform:scale(1.06) } }
  @supports not (container-type: inline-size){
    .title-left { transform: translateX(calc(-28vw * var(--p, 0))) }
    .title-right{ transform: translateX(calc( 28vw * var(--p, 0))) }
    .split-hero__rail{ grid-auto-columns: clamp(220px, 45vw, 360px) }
  }
  @media (prefers-reduced-motion: reduce){
    .title-left,.title-right{ transform:none !important }
    .split-hero__title{ opacity:0 !important }
    .split-hero__rail{ opacity:1 !important; transform:none !important; pointer-events:auto !important }
  }

  .bottom-dock{position:fixed;bottom:0;left:0;right:0;z-index:50;display:flex;justify-content:space-around;padding:4px env(safe-area-inset-right) calc(4px + env(safe-area-inset-bottom)) env(safe-area-inset-left);background:var(--card);box-shadow:0 -2px 10px rgba(0,0,0,.08);}
  .dock-btn{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;background:none;border:0;padding:6px 0;font-size:10px;line-height:1;color:var(--ink);}
  .dock-btn span{width:24px;height:24px;margin-bottom:2px;background:currentColor;mask-repeat:no-repeat;mask-position:center;mask-size:contain;}
  .dock-home span{mask-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M3 12l9-9 9 9v9h-6v-6h-6v6H3z"/></svg>');}
  .dock-quote span{mask-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M6.6 10.8a15 15 0 0 0 6.6 6.6l2.2-2.2a1 1 0 0 1 1.1-.2 11.4 11.4 0 0 0 3.5 1.6 1 1 0 0 1 1 1v3.5a1 1 0 0 1-1 1A17.5 17.5 0 0 1 2 6a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1 11.4 11.4 0 0 0 .6 3.5 1 1 0 0 1-.2 1.1z"/></svg>');}
  .dock-menu span{mask-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M3 6h18M3 12h18M3 18h18" stroke="black" stroke-width="2" stroke-linecap="round"/></svg>');}
  .dock-btn.dock-quote{flex:1.4;transform:translateY(-8px);}
  .dock-btn em{font-style:normal;}

  .neon{position:fixed;inset:0;display:none;background:rgba(0,0,0,.8);backdrop-filter:blur(12px);align-items:center;justify-content:center;}
  .neon.is-open{display:flex;}
  .neon__inner{background:var(--card);color:var(--ink);padding:32px;border-radius:var(--r,16px);box-shadow:0 0 0 4px hsl(var(--accent-hue) 90% 60% / .8);max-height:90vh;overflow:auto;min-width:min(90vw,400px);position:relative;}
  .neon__nav a{display:block;padding:8px 0;color:inherit;text-decoration:none;}
  .neon__close{position:absolute;top:16px;right:16px;background:none;border:0;font-size:32px;line-height:1;color:inherit;}

  :root[data-theme="ebook"] body{background:var(--bg);color:var(--ink);}
  :root[data-theme="ebook"] .content{max-width:68ch;margin-inline:auto;line-height:1.75;}
  :root[data-theme="ebook"] p,
  :root[data-theme="ebook"] li{text-align:justify;}
}

@layer utilities {
  .is-hidden{display:none!important;}
}
