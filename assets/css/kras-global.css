/* assets/css/kras-global.css
   Kras-Trans — motywy, layout, komponenty, micro-UX
   (c) 2025 Kras-Trans
*/

/* =========================
   0) Reset & tokens
   ========================= */
:root {
  /* kolory bazowe (light) */
  --bg: #0b0f17;
  --bg-soft: #0f141e;
  --surface: #ffffff;
  --surface-2: #f6f7f9;
  --text: #12161f;
  --text-2: #2a3140;
  --muted: #677086;
  --brand: #ff7a1a;
  --brand-2: #ff9b52;
  --ok: #2fbf71;
  --danger: #e5484d;
  --ring: rgba(255,122,26,.35);

  /* typografia */
  --font-sans: Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  --fs-100: clamp(.78rem,.74rem + .2vw,.84rem);
  --fs-200: clamp(.9rem,.86rem + .25vw,1rem);
  --fs-300: clamp(1rem,.95rem + .4vw,1.125rem);
  --fs-400: clamp(1.125rem,1.05rem + .7vw,1.25rem);
  --fs-500: clamp(1.35rem,1.15rem + 1.1vw,1.6rem);
  --fs-600: clamp(1.6rem,1.3rem + 1.6vw,2rem);
  --fs-700: clamp(2rem,1.6rem + 2.2vw,2.6rem);
  --fs-800: clamp(2.4rem,1.9rem + 3vw,3.2rem);

  /* promienie, cienie, odstępy */
  --r: 16px;
  --r-2: 24px;
  --gap: 18px;
  --shadow-1: 0 4px 18px rgba(0,0,0,.08);
  --shadow-2: 0 10px 40px rgba(0,0,0,.14);

  --container-max: 1280px;
  --container-x: 16px;
  --container-x-md: 24px;
  --container-x-lg: 32px;
  --container-x-xl: 40px;
  --nav-gap-min: 12px;
  --nav-gap-max: 24px;
  --tap-min: 44px;

  color-scheme: light dark;
}

/* DARK / READING themes (przełączane przez JS -> [data-theme]) */
[data-theme="dark"] {
  --bg: #070b12;
  --bg-soft: #0b1019;
  --surface: #0f141e;
  --surface-2: #121926;
  --text: #e9edf5;
  --text-2: #c3cad9;
  --muted: #96a0b5;
  --ring: rgba(255,122,26,.45);
}

[data-theme="reading"] {
  --bg: #f6f1e7;          /* sepia */
  --bg-soft: #efe8db;
  --surface: #fffdf7;
  --surface-2: #f9f4ea;
  --text: #2a2117;
  --text-2: #4a3c2b;
  --muted: #7b6b55;
  --ring: rgba(241,164,96,.38);
}

/* Wspólne */
* { box-sizing: border-box; }
html, body { height: 100%; }
html { scroll-behavior: smooth; }
body {
  margin: 0;
  font-family: var(--font-sans);
  font-size: var(--fs-300);
  line-height: 1.6;
  color: var(--text);
  background: var(--surface);
  overflow-x: clip;
}

/* opcjonalne font-face (masz pliki preloaded w <head>) */
@font-face {
  font-family: "Inter";
  font-style: normal;
  font-weight: 100 900;
  font-display: swap;
  src: url("/assets/fonts/InterVariable.woff2") format("woff2-variations");
}
@font-face {
  font-family: "Inter";
  font-style: italic;
  font-weight: 100 900;
  font-display: swap;
  src: url("/assets/fonts/InterVariable-Italic.woff2") format("woff2-variations");
}

/* dostępność */
.visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;width:1px;overflow:hidden;white-space:nowrap}
:focus-visible { outline: 2px solid var(--brand); outline-offset: 2px; }

/* =========================
   1) Layout
   ========================= */
.container{
  max-width: var(--container-max);
  margin-inline: auto;
  padding-inline: var(--container-x);
}
@media (min-width:600px){ .container{ padding-inline: var(--container-x-md); } }
@media (min-width:900px){ .container{ padding-inline: var(--container-x-lg); } }
@media (min-width:1200px){ .container{ padding-inline: var(--container-x-xl); } }

.section {
  position: relative;
  padding: clamp(40px,4vw,72px) 0;
}
.section.--line::before{
  content:""; display:block; width: 120px; height: 4px;
  background: linear-gradient(90deg,var(--brand),transparent);
  border-radius: 2px; margin: 0 auto 28px;
  opacity:.35;
}

/* tło – siatka + canvas */
#bg-grid{
  position: fixed; inset: 0; z-index: -2; pointer-events: none;
  background:
    radial-gradient(1px 1px at 20% 30%, rgba(255,145,64,.25) 0 99%, transparent 100%),
    radial-gradient(1px 1px at 70% 60%, rgba(255,145,64,.18) 0 99%, transparent 100%),
    linear-gradient(180deg, var(--surface), var(--surface-2));
}
#bg-canvas{
  position: fixed; inset: 0; z-index: -1; pointer-events: none;
  display: block; width: 100%; height: 100%;
  opacity: .55;
}

/* =========================
   2) Header (sticky, glass)
   ========================= */
.site-header{ position:sticky; top:0; z-index:50; backdrop-filter:saturate(1.2) blur(6px); background: color-mix(in srgb, var(--surface) 82%, transparent); border-bottom:1px solid color-mix(in srgb, var(--ring) 35%, transparent); }
.header-grid{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  column-gap: clamp(12px, 3vw, 32px);
  padding-block: 12px;
}
.brand{ font-weight: 700; text-decoration: none; color: var(--text); font-size: var(--fs-500); }

.nav{ overflow:hidden; }
.nav__list{
  display:flex; align-items:center;
  gap: clamp(var(--nav-gap-min), 2vw, var(--nav-gap-max));
  overflow:auto; white-space:nowrap;
  margin-inline:-8px; padding-inline:8px;
  scrollbar-width:none; -ms-overflow-style:none;
}
.nav__list::-webkit-scrollbar{ display:none; }
.nav__list a{
  display:inline-flex; align-items:center;
  padding:10px 8px;
  min-height: var(--tap-min);
  line-height:1;
  text-decoration:none;
  white-space:nowrap;
  color: var(--text-2);
}
.nav-langs{
  display:flex; gap:8px; align-items:center; list-style:none; margin:0; padding:0;
}
.nav__list a:hover{ background: var(--surface-2); color: var(--text); }
.nav .active > a{ color: var(--text); font-weight: 600; }

.site-header .container{ scroll-padding-inline: 16px; }

@media (pointer:coarse){
  .nav__list a{ padding-inline:12px; }
}

.nav__list a:focus-visible{
  outline: 2px solid currentColor;
  outline-offset: 2px;
  border-radius:10px;
}

/* akcje w nagłówku */
.header-actions{ display:flex; align-items:center; gap: 10px; }
.icon-btn{
  inline-size: 44px; block-size: 44px; border:0; border-radius: 12px; cursor:pointer;
  display: grid; place-items: center; background: var(--surface-2); color: var(--text);
  box-shadow: var(--shadow-1);
}
.theme-toggle{ position: relative; overflow: hidden; }
.theme-toggle .sun, .theme-toggle .moon, .theme-toggle .paper{
  position: absolute; inset: 0; pointer-events: none; opacity: 0; transition: opacity .25s ease;
}
[data-theme="light"] .theme-toggle .sun{ opacity: 1; }
[data-theme="dark"] .theme-toggle .moon{ opacity: 1; }
[data-theme="reading"] .theme-toggle .paper{ opacity: 1; }

/* proste „ikonki” gradientowe */
.theme-toggle .sun{ background: radial-gradient(circle at 50% 50%, #ffd86b 0 40%, transparent 50%); }
.theme-toggle .moon{ background:
  radial-gradient(14px 14px at 58% 44%, transparent 0 9px, #cdd6e8 10px),
  radial-gradient(circle at 50% 50%, #9fb1d9 0 40%, transparent 50%); }
.theme-toggle .paper{ background:
  linear-gradient(135deg, #f5ecd8 0 40%, #efe2c0 60% 100%); }

/* =========================
   3) Hero
   ========================= */
.hero{ padding: clamp(32px,4vw,56px) 0; }
.hero-wrap{
  display: grid; gap: clamp(20px,3vw,36px);
  grid-template-columns: 1.1fr .9fr;
}
.hero-media{
  width: 100%; height: auto; border-radius: var(--r-2);
  box-shadow: var(--shadow-2);
  aspect-ratio: 21/9; object-fit: cover; background: var(--surface-2);
}
.claim{
  display:inline-block; font-size: var(--fs-100); letter-spacing:.08em; text-transform:uppercase;
  background: color-mix(in srgb, var(--brand) 16%, transparent);
  color: var(--text); padding: 6px 10px; border-radius: 999px; margin-bottom: 8px;
}
.hero .btn{ margin-right: 8px; }

/* =========================
   4) Typografia + linki
   ========================= */
h1,h2,h3{ line-height: 1.1; margin: 0 0 .65em; color: var(--text); }
h1{ font-size: var(--fs-800); letter-spacing: -.01em; }
h2{ font-size: var(--fs-600); }
h3{ font-size: var(--fs-500); }
p{ margin: 0 0 1em; color: var(--text-2); }
a{ color: var(--brand); text-decoration: none; }
a:hover{ text-decoration: underline; }

/* tryb czytania – dłuższe linie, większy leading */
.reading-mode .content { max-width: 70ch; margin: 0 auto; }
.reading-mode p { line-height: 1.75; }

/* =========================
   5) Karty + układy list
   ========================= */
.cards{
  display: grid; gap: var(--gap);
  grid-template-columns: repeat(12, minmax(0, 1fr));
}
.cards.cards--wrap > * { grid-column: span 6; }
@media (width <= 900px){
  .hero-wrap{ grid-template-columns: 1fr; }
  .cards.cards--wrap > * { grid-column: span 12; }
}

/* poziomy scroll (mobile), współpracuje z JS drag */
.cards--scroll{
  display: grid; grid-auto-flow: column; grid-auto-columns: 82%;
  gap: var(--gap); overflow-x: auto; overscroll-behavior-x: contain;
  scroll-snap-type: x mandatory; padding-bottom: 8px;
}
.cards--scroll > *{ scroll-snap-align: start; }
.cards--scroll.is-dragging { cursor: grabbing; }

/* element karty */
.card{
  background: var(--surface); color: var(--text);
  border-radius: var(--r-2);
  box-shadow: var(--shadow-1);
  border: 1px solid color-mix(in srgb, var(--ring) 30%, transparent);
  height: 100%;
}
.card .pad{ padding: clamp(14px,2.4vw,22px); }

/* Karty ofert */
.card.offer h3{ margin-bottom: .35em; }
.card.offer p{ margin-bottom: .8em; }

/* FAQ jako <details> */
details.card summary{
  list-style: none; cursor: pointer; font-weight: 700; color: var(--text);
  display: flex; align-items: center; gap: 8px;
}
details.card summary::-webkit-details-marker { display:none; }
details.card[open] { box-shadow: var(--shadow-2); }
details.card[open] summary { margin-bottom: 8px; }
details.card summary::before{
  content: "▸"; transition: transform .2s ease; color: var(--brand);
  transform-origin: 50% 45%;
}
details.card[open] summary::before{ transform: rotate(90deg); }

/* =========================
   6) Przyciski
   ========================= */
.btn{
  --btn-bg: var(--surface-2);
  --btn-fg: var(--text);
  display: inline-flex; align-items: center; gap: 8px;
  padding: 10px 16px; border-radius: 999px; border:1px solid transparent;
  background: var(--btn-bg); color: var(--btn-fg); text-decoration: none; cursor: pointer;
  box-shadow: var(--shadow-1);
  transition: transform .06s ease, background .2s ease, border-color .2s;
}
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }

.btn.primary{
  --btn-bg: linear-gradient(180deg, var(--brand), var(--brand-2));
  --btn-fg: #101318;
  color: var(--btn-fg);
}

/* subtelny „shine” po hover */
.btn--shine{
  position: relative; overflow: hidden; isolation: isolate;
}
.btn--shine::after{
  content:""; position:absolute; inset:-200% -40%;
  background: linear-gradient(75deg, transparent 30%, rgba(255,255,255,.55) 50%, transparent 70%);
  transform: translateX(-40%); opacity: 0; pointer-events: none;
}
.btn--shine:hover::after{ animation: shine 900ms ease; opacity: 1; }
@keyframes shine{ to{ transform: translateX(40%); } }

/* przycisk z postępem (JS dodaje .is-busy) */
.btn--progress{ position: relative; }
.btn__spinner, .btn__check{
  width: 1em; height: 1em; display: inline-block; margin-left: 8px; opacity: 0; transform: scale(.6);
  transition: opacity .2s, transform .2s;
}
.btn__spinner{ border: 2px solid rgba(0,0,0,.25); border-top-color: rgba(0,0,0,.7); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin{ to{ transform: rotate(360deg); } }
.btn.is-busy .btn__spinner{ opacity: 1; transform: none; }
.btn.is-busy .btn__label{ opacity: .7; }
.btn.is-busy .btn__check{ display: none; }

/* =========================
   7) Formularz
   ========================= */
input, textarea{
  width: 100%; border:1px solid color-mix(in srgb, var(--ring) 30%, transparent);
  border-radius: 12px; padding: 12px 14px; background: var(--surface-2); color: var(--text);
  font: inherit;
}
input:focus-visible, textarea:focus-visible{ outline: 2px solid var(--ring); }
label.card .pad{ padding: 8px; }

/* =========================
   8) Dock dolny (skrót)
   ========================= */
.bottom-bar{
  position: sticky; bottom: 12px; z-index: 40; display: grid;
  grid-auto-flow: column; justify-content: center; gap: 10px;
  width: min(560px, calc(100% - 24px)); margin: 0 auto; padding: 8px;
  background: color-mix(in srgb, var(--surface) 86%, transparent);
  border: 1px solid color-mix(in srgb, var(--ring) 35%, transparent);
  border-radius: 999px; box-shadow: var(--shadow-2);
  transition: transform .22s ease, opacity .22s ease;
}
.bottom-bar a{
  display:flex; align-items:center; gap:6px; padding: 8px 12px; border-radius: 999px;
  text-decoration:none; color: var(--text-2);
}
.bottom-bar a:hover{ background: var(--surface-2); color: var(--text); }
.bottom-bar.is-hidden{ transform: translateY(120%); opacity: .0; }

/* =========================
   9) Dymki (theme-tip & cta-tip) + toast
   ========================= */
.theme-tip, .cta-tip{
  position: absolute; z-index: 70; transform: translate(-50%, -8px) scale(.98);
  background: color-mix(in srgb, var(--surface) 98%, transparent);
  border:1px solid color-mix(in srgb, var(--ring) 40%, transparent);
  border-radius: 14px; box-shadow: var(--shadow-2);
  padding: 12px 14px; min-inline-size: 260px; max-inline-size: 360px;
  opacity: 0; transition: transform .18s ease, opacity .18s ease;
}
.theme-tip.is-in, .cta-tip.is-in{ opacity: 1; transform: translate(-50%, -12px) scale(1); }
.theme-tip__close{
  position:absolute; top:6px; right:8px; border:0; background:transparent; color:var(--muted);
  font-size: 18px; cursor:pointer;
}
.theme-tip__actions{ display:flex; gap:8px; margin-top:8px; }
.theme-tip__actions button{
  padding:6px 10px; border-radius: 10px; border:1px solid color-mix(in srgb, var(--ring) 35%, transparent);
  background: var(--surface-2); color: var(--text); cursor:pointer;
}

.cta-tip{ pointer-events: auto; }
.cta-tip__arrow{
  position:absolute; left: 50%; top: calc(100% - 2px); transform: translateX(-50%);
  width: 14px; height: 14px; rotate: 45deg;
  background: inherit; border-right: inherit; border-bottom: inherit;
}

#toast{
  position: fixed; left: 50%; bottom: 24px; z-index: 80; transform: translate(-50%, 14px);
  background: color-mix(in srgb, var(--surface) 95%, transparent);
  border:1px solid color-mix(in srgb, var(--ring) 40%, transparent);
  border-radius: 999px; padding: 10px 16px; box-shadow: var(--shadow-2);
  opacity: 0; transition: transform .16s ease, opacity .16s ease;
}
#toast.is-in{ transform: translate(-50%, 0); opacity: 1; }

/* =========================
   10) Footer
   ========================= */
.site-footer{
  padding: 40px 0 24px; border-top: 1px solid color-mix(in srgb, var(--ring) 30%, transparent);
  background: color-mix(in srgb, var(--surface) 92%, transparent);
}
.footer-grid{
  display: grid; gap: 16px;
  grid-template-columns: 1.1fr .9fr;
  align-items: start; padding-bottom: 14px;
}
.footer-links{ display:flex; flex-wrap: wrap; gap: 10px 16px; }
.footer-links a{ color: var(--text-2); text-decoration:none; }
.footer-links a:hover{ color: var(--text); text-decoration: underline; }

/* =========================
   11) Różne
   ========================= */
.sep--morph{ height: 36px; margin-top: 24px; opacity: .5; }
.text{ text-align: center; }

img, video{ max-width: 100%; height: auto; }

/* =========================
   12) Motion & media
   ========================= */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: .001ms !important; animation-iteration-count: 1 !important; transition-duration: .001ms !important; }
  #bg-canvas{ display:none; }
  .btn--shine::after{ display:none; }
}

/* breakpoint: kompaktowe menu, stack footer, prostsze layouty */
@media (width <= 780px){
  .header-grid{ grid-template-columns: 1fr auto; row-gap: 10px; }
  .nav-langs{ order: 3; }
  .footer-grid{ grid-template-columns: 1fr; }
}

/* =========================
   13) Bez CLS: domyślne aspect-ratio
   ========================= */
.hero-media[width][height]{ height:auto; }
.card img{ width: 100%; height: auto; border-radius: 12px; display:block; }

/* =========================
   14) Map/iframe wrapper (opcjonalnie dla kierunków)
   ========================= */
.map-frame{
  display:block; background: var(--surface-2); border-radius: var(--r-2);
  box-shadow: var(--shadow-2); overflow:hidden;
}
.map-frame iframe{ display:block; width:100%; aspect-ratio: 16/10; border:0; }

/* === Lang switcher === */
.lang-switcher{ position:relative; margin-left:.5rem }
.lang-btn{
  display:flex; align-items:center; gap:.45rem;
  padding:.35rem .65rem; border-radius:999px;
  border:1px solid var(--line,#E6E6E9);
  background:var(--panel,rgba(255,255,255,.75)); backdrop-filter: blur(6px);
  font-weight:600; line-height:1; cursor:pointer;
}
.lang-btn .flag{ font-size:1rem; transform-style:preserve-3d; transition:transform .25s ease }
.lang-btn:hover .flag{ transform:rotateX(10deg) rotateY(-8deg) translateZ(.01px) }
.lang-btn .code{ letter-spacing:.04em }
.lang-btn .chev{ opacity:.7 }

.lang-menu{
  position:absolute; right:0; top:calc(100% + .5rem); min-width:210px;
  background:var(--panel, #fff); border:1px solid var(--line,#E6E6E9);
  box-shadow:0 12px 40px rgba(0,0,0,.12); border-radius:14px; padding:.4rem;
  transform: translateY(-6px) scale(.98); opacity:0; pointer-events:none;
  transition:transform .18s ease, opacity .18s ease;
  z-index:50;
}
.lang-switcher[data-open="1"] .lang-menu{ transform: none; opacity:1; pointer-events:auto; }
.lang-item{
  display:flex; align-items:center; gap:.6rem; border-radius:10px;
  padding:.55rem .6rem; text-decoration:none; color:inherit;
}
.lang-item .flag{
  font-size:1.05rem; width:1.35rem; height:1.05rem; display:inline-grid; place-items:center;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.18)); transform-style:preserve-3d; transition:transform .25s ease;
}
.lang-item:hover{ background:rgba(0,0,0,.04) }
.lang-item:hover .flag{ transform:rotateX(14deg) rotateY(-10deg) translateZ(.01px) }
.lang-item.is-disabled{ opacity:.45; pointer-events:none }
.lang-item.is-current{ font-weight:700 }
@media (max-width: 780px){
  .lang-switcher{ margin-left:auto }
}
