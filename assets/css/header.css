/* ====== HEADER (slim, fast, no-bullets) ====== */
:root{
  --bg:#0b111c; --bg-2:#0f1726; --glass:rgba(12,18,30,.55);
  --text:#e9f2ff; --muted:#9db0cf; --brand:#2ee6c8; --brand-ink:#001e18;
  --border:rgba(255,255,255,.10); --shadow:0 16px 36px rgba(0,0,0,.30);
  --radius:14px; --radius-lg:18px; --container:1240px; --mega-max-h:420px;
}
:root[data-theme="light"]{
  --bg:#ffffff; --bg-2:#f6f8fb; --glass:rgba(255,255,255,.78);
  --text:#0c1323; --muted:#506082; --border:rgba(12,19,35,.12);
  --shadow:0 16px 32px rgba(0,0,0,.10);
}

/* Reset kropek i marginesów */
.menu, .menu ul, .lang__list{ list-style:none; margin:0; padding:0; }

.kt-header{
  position:sticky; top:0; inset-inline:0; z-index:70;
  background:linear-gradient(180deg, var(--glass), transparent 130%);
  border-bottom:1px solid var(--border);
  backdrop-filter:saturate(120%) blur(10px); -webkit-backdrop-filter:saturate(120%) blur(10px);
}
.kt-header__bar{
  max-width:var(--container); margin:0 auto; padding:14px 20px;
  display:flex; align-items:center; gap:16px;
}

.brand img{ height:72px; width:auto; display:block; transition:height .2s ease; }

.main-nav{ margin-inline:auto; }
.menu{ display:flex; align-items:center; gap:6px; }
.menu-item{ position:relative; }
.menu-link{
  padding:10px 12px; border-radius:10px; display:inline-flex;
  align-items:center; gap:8px; color:var(--text); white-space:nowrap;
  line-height:1; border:1px solid transparent;
}
.menu-link:hover{ background:rgba(255,255,255,.06); border-color:var(--border); }
.menu-link.has-caret::after{
  content:""; width:10px; height:10px; margin-left:6px; flex:0 0 10px;
  mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M7 10l5 5 5-5z"/></svg>') center/contain no-repeat;
  background:var(--muted); transition:transform .2s ease, background .2s ease;
}
.menu-item[aria-open="true"] > .menu-link.has-caret::after{ transform:rotate(180deg); background:var(--text); }

/* MEGA – slim panel, nie zasłania całego ekranu */
.mega{
  position:fixed; left:0; right:0; top:var(--mega-top,86px); z-index:69;
  background:linear-gradient(180deg, rgba(18,24,38,.98), rgba(10,16,28,.96));
  border-bottom:1px solid var(--border); box-shadow:var(--shadow);
  transform:translateY(-6px); opacity:0; pointer-events:none;
  transition:transform .18s ease, opacity .18s ease;
  max-height:var(--mega-max-h); overflow:hidden; content-visibility:auto; contain:layout;
}
.menu-item[aria-open="true"] .mega{ transform:translateY(0); opacity:1; pointer-events:auto; }

.mega__wrap{ max-width:var(--container); margin:0 auto; padding:14px 20px; display:grid; grid-template-columns:3fr 1fr; gap:16px; height:100%; }
.mega__scroll{ min-height:0; overflow:auto; overscroll-behavior:contain; padding-right:6px; }
.mega__cols{ display:grid; gap:10px 16px; grid-template-columns:repeat(3,minmax(220px,1fr)); }
@media (min-width:1280px){ .mega__cols{ grid-template-columns:repeat(4,minmax(220px,1fr)); } }

.mega__link{
  display:block; padding:9px 10px; border-radius:12px; color:var(--text);
  border:1px solid transparent; font-size:15.5px;
}
.mega__link:hover{ background:rgba(255,255,255,.06); border-color:var(--border); }

.mega__aside{ border-left:1px dashed rgba(255,255,255,.08); padding-left:16px; display:flex; flex-direction:column; gap:12px; min-width:240px; }
.mega__card{ background:linear-gradient(180deg, rgba(30,205,195,.12), rgba(30,205,195,.04)); border:1px solid rgba(46,230,200,.2); border-radius:14px; padding:14px; color:var(--text); }
.mega__cta{ margin-top:8px; display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px; background:var(--brand); color:var(--brand-ink); font-weight:700; }

.header-actions{ display:flex; align-items:center; gap:10px; }
.btn-quote{ padding:10px 14px; border-radius:999px; background:var(--brand); color:var(--brand-ink); border:1px solid transparent; font-weight:700; }
.btn-quote:hover{ filter:brightness(.95); }

/* Lang switcher */
.lang{ position:relative; }
.lang__btn{ display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:12px; background:rgba(255,255,255,.06); border:1px solid var(--border); color:var(--text); }
.lang__list{ position:absolute; right:0; top:calc(100% + 8px); min-width:160px; padding:8px; background:var(--bg-2); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow); display:none; }
.lang[aria-open="true"] .lang__list{ display:block; }
.lang__opt{ display:flex; gap:8px; align-items:center; padding:8px 10px; border-radius:10px; color:var(--text); }
.lang__opt:hover{ background:rgba(255,255,255,.06); }
.flag{ width:18px; height:12px; background-size:cover; border-radius:2px; box-shadow:0 0 0 1px rgba(0,0,0,.25) inset; }
.flag-pl{ background-image:url('/assets/flags/pl.svg'); }
.flag-gb{ background-image:url('/assets/flags/gb.svg'); }
.flag-de{ background-image:url('/assets/flags/de.svg'); }
.flag-fr{ background-image:url('/assets/flags/fr.svg'); }
.flag-it{ background-image:url('/assets/flags/it.svg'); }
.flag-ru{ background-image:url('/assets/flags/ru.svg'); }
.flag-ua{ background-image:url('/assets/flags/ua.svg'); }

/* Theme switch */
#theme-toggle{ width:40px; height:36px; border-radius:10px; border:1px solid var(--border); color:var(--text); background:rgba(255,255,255,.06); display:flex; align-items:center; justify-content:center; gap:6px; }
#theme-toggle .sun{ display:var(--sun,block); }
#theme-toggle .moon{ display:var(--moon,none); }
:root[data-theme="dark"] #theme-toggle{ --sun:none; --moon:block; }

/* Mobile */
.hamburger{ display:none; width:46px; height:42px; border-radius:12px; border:1px solid var(--border); background:rgba(255,255,255,.06); }
.hamburger span{ display:block; height:2px; background:var(--text); margin:6px 10px; border-radius:2px; }

/* Ukryj mobilne submenu na desktopie – źródło „ściany” linków */
.submenu-mobile{ display:none!important; }

@media (max-width:1100px){
  .hamburger{ display:block; }
  .main-nav{ position:fixed; inset:72px 16px auto 16px; z-index:75; }
  .menu{ display:none; flex-direction:column; gap:6px; }
  .kt-header[aria-mobile-open="true"] .menu{ display:flex; }
  .menu-item{ background:var(--bg-2); border:1px solid var(--border); border-radius:var(--radius-lg); padding:6px; }
  .mega{ display:none!important; }
  .submenu-mobile{ display:block!important; padding:6px; }
  .nav-scrim{ position:fixed; inset:0; background:rgba(0,0,0,.45); backdrop-filter:blur(2px); }
}
.nav-scrim[hidden]{ display:none!important; }

/* Separator */
.header-wave{ width:100%; height:34px; display:block; }
.header-wave path{ fill:var(--bg); opacity:.92; }

@media (prefers-reduced-motion:reduce){
  .mega, .menu-link::after, .brand img{ transition:none!important; animation:none!important; }
}
@supports not ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))){
  .kt-header{ background:linear-gradient(180deg, rgba(10,16,28,.92), rgba(10,16,28,.80)); }
}
